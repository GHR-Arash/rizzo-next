@mixin link-transition() {
  transition-duration: 300ms;
  transition-property: color, border, background;

  &::after,
  &::before {
    transition-duration: 300ms;
    transition-property: color, border, background;
  }

  &:hover {
    transition-duration: 0;

    &::after,
    &::before {
      transition-duration: 0;
    }
  }
}

@mixin more() {
  @include link-transition();
  font-size: 1.3rem;
  font-weight: 600;
  line-height: 1;
  text-transform: uppercase;

  &:hover {
    color: $color-primary + 30;
  }

  [class*="icon-"] {
    backface-visibility: hidden;
    display: inline-block;
    font-size: 6px;
    line-height: 1.6;
    transform: translateX(6px);
    transition: transform 500ms;
    vertical-align: 20%;
  }

  &:hover {
    [class*="icon-"] {
      transform: translateX(.2rem);
    }
  }
}

@mixin see-more() {
  @include more();
  display: inline-block;
  padding: $gutter;
  position: relative;

  &--small {
    font-size: 1rem;
  }
}

/// Provides the underline for the `underlined-link` mixin
/// @param {Color} $color [$color-blue] - Color of the underline, usually the same as the text color
/// @param {Dimension} $offset [2px] - Amount of padding above the underline
/// @param {Dimension} $weight [1px] - Width of the underline
@mixin underline(
  $color: $color-blue,
  $offset: 2px,
  $weight: 1px
) {
  background-image: linear-gradient(
    to top,
    transparent,
    transparent $offset,
    $color $offset,
    $color ($offset + $weight),
    transparent ($offset + $weight)
  );
}

/// Creates a nicely underlined hyperlink
/// @param {Color} $link-color [$color-blue] Link color
/// @param {Color} $link-color-active [$color-blue + 30] Link color for hover, active and focus states
/// @param {Color} $background-color [#fff] Background color of the link, usually the same color as the page
/// @param {Boolean} $breaking-underlines [true] If the underline should "break" as it passes thru a descender
@mixin underlined-link(
  $link-color: $color-blue,
  $link-color-active: $color-blue + 30,
  $underline-offset: 2px,
  $background-color: #fff,
  $breaking-underlines: true
) {
  @include underline(rgba($link-color, .4), $underline-offset);
  color: $link-color;
  position: relative;
  text-decoration: none;
  transition: color 200ms ease;

  @if $breaking-underlines {
    text-shadow: -1px -1px 0 $background-color,
      1px -1px 0 $background-color,
      -1px 1px 0 $background-color,
      1px 1px 0 $background-color;
  }

  // @TODO Figure out why these styles don't work
  // @media (-webkit-min-device-pixel-ratio: 1.5), (min-resolution: 144dpi) {
  //   @include underline(rgba($link-color, .4), $underline-offset, .5);
  // }

  &:hover,
  &:active,
  &:focus {
    @include underline(rgba($link-color-active, .4), $underline-offset);
    color: $link-color-active;

    // @TODO Figure out why these styles don't work
    // @media (-webkit-min-device-pixel-ratio: 1.5), (min-resolution: 144dpi) {
    //   @include underline(rgba($link-color-active, .4), $underline-offset, .5);
    // }
  }
}
